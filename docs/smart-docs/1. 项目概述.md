# Z-Reader 项目概述

## 什么是 Z-Reader?

Z-Reader 是一款**本地优先 (Local-First)** 的桌面知识管理与阅读器应用，功能全面对齐 Readwise Reader。它基于 Electron 构建，专注于为信息密集型用户提供高效的内容收集、分流、深度阅读和知识沉淀体验。

与传统在线阅读器不同，Z-Reader 将所有数据存储在本地 SQLite 数据库中，实现**完全离线可用**，同时通过 iCloud 实现多设备同步。

## 核心定位

> 为 RSS 重度用户和深度阅读者打造的桌面端极致阅读体验，实现高效内容收集、分流、深度阅读、知识沉淀。

## 技术栈

| 层级 | 技术选型 |
|------|---------|
| **框架** | Electron 40 + React 19 + TypeScript 5.7 |
| **构建工具** | Vite + Electron Forge |
| **样式** | Tailwind CSS 4 + Shadcn/UI 风格 |
| **数据库** | SQLite (`better-sqlite3`) + Drizzle ORM |
| **RSS 解析** | `rss-parser` |
| **正文提取** | `@postlight/parser` |
| **AI 集成** | Vercel AI SDK (`ai`) + OpenRouter/Minimax |
| **PDF 阅读** | `pdfjs-dist` |
| **EPUB 阅读** | `epubjs` |
| **YouTube** | `youtubei.js` |
| **音频处理** | `ffmpeg-static` |
| **国际化** | `i18next` + `react-i18next` |
| **包管理器** | pnpm |
| **测试** | Vitest + jsdom |

## 核心功能

### 多源内容聚合
- **RSS/Atom 订阅**：支持单条 URL 添加和 OPML 批量导入，定时自动抓取（每 15 分钟）
- **播客订阅**：iTunes / PodcastIndex 搜索，音频播放与转录
- **YouTube 视频**：视频流提取、多清晰度选择、字幕获取
- **电子书**：EPUB 和 PDF 阅读器，支持书签与高亮
- **网页文章**：通过 URL 保存任意网页文章
- **Newsletter**：邮件订阅转 RSS，自动接收

### Feed-Library 二元架构
- **Feed 区**：新抓取的内容落入 Feed，默认 7 日保留期
- **Library 区**：用户主动收藏的高价值内容，进入深度整理流程

### 键盘优先交互
- Vim 风格导航 (J/K 上下移动)
- 五大主操作键：E(归档)、D(删除)、L(稍后读)、S(加入精选)、Z(撤销)
- Cmd+K 命令面板，支持模糊搜索
- 全局快捷键覆盖所有操作

### AI 智能助手
- 文章摘要、翻译、自动标签
- 主题提取
- 对话式 AI 分析（支持流式输出）
- 可配置预设 Prompt 模板

### 高亮与注释系统
- 文本选中高亮，支持多色标记
- 高亮注释与标签
- 高亮导出（剪贴板/文件）
- 分享卡片生成（多种主题）

### 语音转文字 (ASR)
- 多供应商支持（火山引擎、腾讯云）
- 播客/音视频自动转录
- 实时流式识别

### 内容发现
- RSSHub 集成，按分类浏览热门源
- 播客目录搜索
- RSS 自动发现

### iCloud 同步
- 基于文件的增量同步
- 设备身份管理
- 冲突自动合并

### Chrome 扩展
- 网页高亮与标注
- 一键保存到 Z-Reader
- 离线模式支持

## 项目结构

```
z-reader/
├── src/
│   ├── main.ts              # Electron 主进程入口
│   ├── preload.ts           # Preload 安全桥接
│   ├── renderer.ts          # 渲染进程入口（React 挂载）
│   ├── index.css            # 全局样式
│   ├── i18n.ts              # 国际化配置
│   ├── main/                # 主进程模块
│   │   ├── db/              # 数据库层（Schema + 初始化）
│   │   ├── ipc/             # IPC 处理器（20+ 模块）
│   │   ├── services/        # 业务服务（RSS、解析、同步、ASR 等）
│   │   └── ai/              # AI 工具上下文工厂
│   ├── ai/                  # AI 模块
│   │   ├── providers/       # LLM 供应商配置
│   │   ├── services/        # AI 服务（聊天、追踪）
│   │   ├── skills/          # AI 技能（主题提取等）
│   │   └── tools/           # AI 工具定义
│   ├── renderer/            # 渲染进程模块
│   │   ├── App.tsx          # React 根组件
│   │   ├── components/      # 47+ UI 组件
│   │   ├── hooks/           # 自定义 Hooks
│   │   ├── layouts/         # 布局组件
│   │   └── utils/           # 工具函数
│   ├── shared/              # 共享类型与常量
│   │   ├── types.ts         # 800+ 行类型定义
│   │   ├── ipc-channels.ts  # 60+ IPC 通道常量
│   │   └── global.d.ts      # 全局类型声明
│   └── locales/             # 国际化语言文件
│       ├── en.json          # 英文
│       └── zh.json          # 中文
├── extensions/
│   └── chrome-highlighter/  # Chrome 高亮扩展
├── tests/                   # 20+ 测试文件
├── docs/                    # 项目文档
└── out/                     # 构建输出
```

## 项目规模

| 指标 | 数值 |
|------|------|
| 总代码行数 | ~95,000 行 |
| TypeScript/TSX 文件数 | 151 |
| 主进程文件 | ~50 |
| 渲染进程组件 | 47+ |
| 测试文件 | 20+ |
| AI 模块文件 | 14 |
| Chrome 扩展文件 | 17 |
| IPC 通道 | 60+ |
| 数据库表 | 14 |

## 快速开始

```bash
# 安装依赖
pnpm install

# 启动开发模式
pnpm start

# 运行测试
pnpm test

# 打包应用
pnpm package

# 构建安装包
pnpm make
```

## 许可协议

AGPL-3.0-only
